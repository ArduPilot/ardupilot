
# SPI Buses; https://docs.espressif.com/projects/esp-idf/en/v5.3.4/esp32/api-reference/peripherals/spi_master.html
#            Host      DMA Channel     MOSI        MISO        SCLK
ESP32_SPIBUS SPI2_HOST SPI_DMA_CH_AUTO GPIO_NUM_14 GPIO_NUM_43 GPIO_NUM_44

# the optical flow sensor (pixartflow) is on the same bus as the main IMU so
# a) we have to list it here so its CS gets deasserted and the IMU can talk, but
# b) we name it something the driver won't find because it's too slow and ties up the bus

# SPI Devices
#            Name                Bus   Device  ChipSel      Mode LoSpeed HiSpeed
ESP32_SPIDEV bmi270              0     0       GPIO_NUM_46  3    10*MHZ  10*MHZ
ESP32_SPIDEV pixartflow_disabled 0     1       GPIO_NUM_12  3     2*MHZ   2*MHZ

# i2c Buses
#             Port       SDA         SCL         SPEED    INTERNAL
ESP32_I2CBUS  I2C_NUM_0  GPIO_NUM_3  GPIO_NUM_4  400*KHZ  true
ESP32_I2CBUS  I2C_NUM_1  GPIO_NUM_13 GPIO_NUM_15 400*KHZ  false

# one IMU:
IMU BMI270 SPI:bmi270 ROTATION_ROLL_180_YAW_90

define INS_MAX_INSTANCES 3

# one Baro:
BARO BMP280 I2C:0:0x76

# HARDWARE UARTS. UART 0 apparently goes over USB? so we assign it to pins we
# don't have mapped to anything. might be fixable in the HAL...
# UART 1 (SERIAL3) is the black grove connector
#             PORT        RXPIN        TXPIN
ESP32_SERIAL  UART_NUM_0  GPIO_NUM_18  GPIO_NUM_17
ESP32_SERIAL  UART_NUM_1  GPIO_NUM_1   GPIO_NUM_2

# the stampfly does not have an Airspeed sensor:
define AP_AIRSPEED_ENABLED 0

# This is a board that's not really intended for anything other than copter
AUTOBUILD_TARGETS Copter
