# PocketPilot2

# GCC 64:
env TOOLCHAIN aarch64-linux-gnu

# IMUs:
IMU Invensensev2 SPI:ICM20948 ROTATION_NONE
define INS_MAX_INSTANCES 1

# Compasses:
COMPASS AK09916:probe_ICM20948_SPI 0 ROTATION_YAW_90
define HAL_PROBE_EXTERNAL_I2C_COMPASSES 1

# Baros:
BARO BMP388 SPI:BMP388

# CAN Support:
env WITH_CAN 1
define HAL_NUM_CAN_IFACES 1

# PRU defines
define AP_HAL_LINUX_AIOPRU_OPTIMIZATION_LEVEL  1
define AP_HAL_LINUX_AIOPRU_LOAD_WORDWISE  1

#Notify LEDS A B C 
define AP_NOTIFY_GPIO_LED_3_ENABLED 1

define HAL_GPIO_A_LED_PIN 45
define HAL_GPIO_B_LED_PIN 46
define HAL_GPIO_C_LED_PIN 91
define HAL_GPIO_LED_ON    1

define AP_NOTIFY_BUZZER_ENABLED 1
define HAL_BUZZER_PIN 86

#            NAME      BUS SUBDEV MODE       BPW CS_PIN         LOWSPD HIGHSPD
LINUX_SPIDEV "ICM20948" 0   0      SPI_MODE_3 8   SPI_CS_KERNEL  10*MHZ 10*MHZ
LINUX_SPIDEV "BMP388"   0   1      SPI_MODE_3 8   SPI_CS_KERNEL  10*MHZ 10*MHZ

define HAL_LINUX_GPIO_PB2_ENABLED 1

# Relay pins P1.2, P1.4, P1.34 P1.12
define RELAY1_PIN_DEFAULT 10
define RELAY2_PIN_DEFAULT 12
define RELAY3_PIN_DEFAULT 2
define RELAY4_PIN_DEFAULT 77

#MSP
define HAL_MSP_ENABLED 1
#Display Port
define HAL_WITH_MSP_DISPLAYPORT 1

# AnalogIn_IIO configuration:
define AP_HAL_LINUX_ANALOGIN_IIO_VOLTAGE_SCALING 3.0*1.8/4095.0

// FIXME: use of this define should go away:
define CONFIG_HAL_BOARD_SUBTYPE HAL_BOARD_SUBTYPE_LINUX_POCKET2
