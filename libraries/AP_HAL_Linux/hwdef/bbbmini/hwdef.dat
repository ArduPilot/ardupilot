# BeagleBoneBlue mini

# IMUs:
IMU Invensense SPI:mpu9250 ROTATION_NONE
IMU Invensense SPI:mpu9250ext ROTATION_NONE
define INS_MAX_INSTANCES 3

# Compasses:
COMPASS AK8963:probe_mpu9250 0 ROTATION_NONE
COMPASS AK8963:probe_mpu9250 1 ROTATION_NONE
define AP_COMPASS_PROBING_ENABLED 1

# Baros:
BARO MS5611 SPI:ms5611

# CAN Support:
env WITH_CAN 1
define HAL_NUM_CAN_IFACES 1


define DEFAULT_NTF_LED_TYPES (Notify_LED_Board)

define AP_NOTIFY_GPIO_LED_3_ENABLED 1
define HAL_GPIO_A_LED_PIN 69
define HAL_GPIO_B_LED_PIN 68
define HAL_GPIO_C_LED_PIN 45

define AP_NOTIFY_BUZZER_ENABLED 1
define HAL_BUZZER_PIN 11

define HAL_OPTFLOW_PX4FLOW_I2C_BUS 2
define HAL_RANGEFINDER_LIGHTWARE_I2C_BUS 2

#            NAME         BUS SUBDEV MODE       BPW CS_PIN         LOWSPD HIGHSPD
LINUX_SPIDEV "mpu9250"    2   0      SPI_MODE_3 8   SPI_CS_KERNEL   1*MHZ 11*MHZ
LINUX_SPIDEV "mpu9250ext" 1   0      SPI_MODE_3 8   SPI_CS_KERNEL   1*MHZ 11*MHZ
LINUX_SPIDEV "ms5611"     2   1      SPI_MODE_3 8   SPI_CS_KERNEL  10*MHZ 10*MHZ

define HAL_LINUX_GPIO_BBB_ENABLED 1

define HAL_BATT_VOLT_PIN                  0
define HAL_BATT_CURR_PIN                  1
define HAL_BATT_VOLT_SCALE                10.1f
define HAL_BATT_CURR_SCALE                17.0f

define AP_RANGEFINDER_BBB_PRU_ENABLED AP_RANGEFINDER_BACKEND_DEFAULT_ENABLED

define RELAY1_PIN_DEFAULT 27
define RELAY2_PIN_DEFAULT 65
define RELAY3_PIN_DEFAULT 22
define RELAY4_PIN_DEFAULT 81
define RELAY5_PIN_DEFAULT 23
define RELAY6_PIN_DEFAULT 26


// FIXME: use of this define should go away:
define CONFIG_HAL_BOARD_SUBTYPE HAL_BOARD_SUBTYPE_LINUX_BBBMINI

# AnalogIn_IIO configuration:
define AP_HAL_LINUX_ANALOGIN_IIO_VOLTAGE_SCALING 3.0*1.8/4095.0
